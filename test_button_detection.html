<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Button Detection Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #1e1e1e;
            color: #ccc;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
        }
        .button-test {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #333;
            border-radius: 5px;
            background: #252525;
        }
        .test-button {
            margin: 5px;
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            background: #4CAF50;
            color: white;
        }
        .test-button:hover {
            background: #45a049;
        }
        .run-button {
            background: #FF9800;
        }
        .run-button:hover {
            background: #e68900;
        }
        .keep-button {
            background: #2196F3;
        }
        .keep-button:hover {
            background: #1976D2;
        }
        .accept-button {
            background: #4CAF50;
        }
        .accept-button:hover {
            background: #45a049;
        }
        .log {
            background: #000;
            color: #0f0;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            margin: 10px 0;
            max-height: 200px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Button Detection Test</h1>
        <p>This page tests the button detection logic for the auto-accept script.</p>
        
        <div class="button-test">
            <h3>Test Buttons (should be detected)</h3>
            <button class="test-button run-button" onclick="logClick('Run')">Run</button>
            <button class="test-button keep-button" onclick="logClick('Keep')">Keep</button>
            <button class="test-button accept-button" onclick="logClick('Accept')">Accept</button>
            <button class="test-button" onclick="logClick('Accept All')">Accept All</button>
            <button class="test-button" onclick="logClick('Review Next File')">Review Next File</button>
            <button class="test-button" onclick="logClick('Keep All')">Keep All</button>
            <button class="test-button" onclick="logClick('Apply')">Apply</button>
            <button class="test-button" onclick="logClick('Execute')">Execute</button>
        </div>
        
        <div class="button-test">
            <h3>Test Buttons (should NOT be detected)</h3>
            <button class="test-button" onclick="logClick('Reject')">Reject</button>
            <button class="test-button" onclick="logClick('Cancel')">Cancel</button>
            <button class="test-button" onclick="logClick('Close')">Close</button>
        </div>
        
        <div class="button-test">
            <h3>Simulated IDE Interface</h3>
            <div style="background: #2d2d2d; padding: 15px; border-radius: 5px; margin: 10px 0;">
                <div style="margin-bottom: 10px;">Code changes detected:</div>
                <div style="background: #1e1e1e; padding: 10px; border-radius: 3px; margin: 5px 0;">
                    <div style="color: #4CAF50;">+15 lines added</div>
                    <div style="color: #f44336;">-3 lines deleted</div>
                </div>
                <div style="margin-top: 10px;">
                    <button class="test-button run-button" onclick="logClick('Run Command')">Run Command</button>
                    <button class="test-button keep-button" onclick="logClick('Keep')">Keep</button>
                    <button class="test-button accept-button" onclick="logClick('Accept')">Accept</button>
                </div>
            </div>
        </div>
        
        <div class="log" id="log">
            <div>Button click log will appear here...</div>
        </div>
        
        <div class="button-test">
            <h3>Test Controls</h3>
            <button class="test-button" onclick="testButtonDetection()">Test Button Detection</button>
            <button class="test-button" onclick="clearLog()">Clear Log</button>
            <button class="test-button" onclick="loadScript()">Load Auto-Accept Script</button>
        </div>
    </div>

    <script>
        function logClick(buttonText) {
            const log = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            log.innerHTML += `<div>[${timestamp}] Clicked: ${buttonText}</div>`;
            log.scrollTop = log.scrollHeight;
        }
        
        function clearLog() {
            document.getElementById('log').innerHTML = '<div>Log cleared...</div>';
        }
        
        function testButtonDetection() {
            const log = document.getElementById('log');
            log.innerHTML += '<div>=== Testing Button Detection ===</div>';
            
            // Test the button detection logic
            const allButtons = document.querySelectorAll('button');
            let detectedButtons = [];
            
            allButtons.forEach(button => {
                const text = button.textContent.toLowerCase().trim();
                const patterns = ['accept', 'keep', 'run', 'apply', 'execute', 'review'];
                const isDetected = patterns.some(pattern => text.includes(pattern));
                
                if (isDetected) {
                    detectedButtons.push(button.textContent.trim());
                }
            });
            
            log.innerHTML += `<div>Found ${detectedButtons.length} buttons: ${detectedButtons.join(', ')}</div>`;
            log.innerHTML += '<div>=== End Test ===</div>';
            log.scrollTop = log.scrollHeight;
        }
        
        function loadScript() {
            const log = document.getElementById('log');
            log.innerHTML += '<div>Loading auto-accept script...</div>';
            
            // Create a script element to load the original.js
            const script = document.createElement('script');
            script.src = './original.js';
            script.onload = function() {
                log.innerHTML += '<div>Script loaded successfully! Check console for startup message.</div>';
                log.innerHTML += '<div>Try: startAccept() to begin auto-clicking</div>';
                log.scrollTop = log.scrollHeight;
            };
            script.onerror = function() {
                log.innerHTML += '<div>Error loading script. Make sure original.js is in the same directory.</div>';
                log.scrollTop = log.scrollHeight;
            };
            document.head.appendChild(script);
        }
    </script>
</body>
</html>
